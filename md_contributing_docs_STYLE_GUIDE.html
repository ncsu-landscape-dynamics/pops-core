<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pops-core: Contributing to PoPS Core</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pops-core
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">PoPS (Pest or Pathogen Spread) Model Core C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Contributing to PoPS Core </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This guide applies to PoPS Core (the C++ library), but also the C++ parts of the rpops R package.</p>
<h1><a class="anchor" id="autotoc_md119"></a>
Style guide</h1>
<h2><a class="anchor" id="autotoc_md120"></a>
C++ code</h2>
<p>The style is inspired by well-defined Python's PEP8, specifically the subset enforced by Black and for C++ specific items by mix of LLVM and Qt.</p>
<h3><a class="anchor" id="autotoc_md121"></a>
Formatting</h3>
<p>Formatting is managed by <em>clang-format</em> tool. You need to have version 10 to produce results consistent with the current formatting.</p>
<p>Run the formatting on all the files in the top directory:</p>
<div class="fragment"><div class="line">clang-format -i include/*/*.hpp tests/*.cpp</div>
</div><!-- fragment --><p>If you have other versions of <em>clang-format</em> than 10, use:</p>
<div class="fragment"><div class="line">clang-format-10 -i include/*/*.hpp tests/*.cpp</div>
</div><!-- fragment --><p>If it is hard for your to get clang-format or the version 10 directly, build a Docker image using:</p>
<div class="fragment"><div class="line">docker build -t doozyx/clang-format-lint-action &quot;github.com/DoozyX/clang-format-lint-action&quot;</div>
</div><!-- fragment --><p>Then run the formatting using a Docker container in the top directory:</p>
<div class="fragment"><div class="line">docker run --rm --workdir /src -v $(pwd):/src --entrypoint /clang-format/clang-format10 doozyx/clang-format-lint-action -i include/*/*.hpp tests/*.cpp</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md122"></a>
Classes, variables, functions, and templates</h3>
<p>Use came case (CamelCase) for classes, e.g. <code>MyName</code>. Use underscores to separate words in variables and functions (snake_case), e.g. <code>my_name</code>. Do the same for function and class templates.</p>
<h3><a class="anchor" id="autotoc_md123"></a>
Functions and methods</h3>
<p>Use underscores to separate words.</p>
<p>For setters use <code>set_name()</code>. Don't overuse the <code>set</code> prefix, e.g. in case of <code>set_open()</code> it is not clear if just a property is being set or if some opening action is being performed as a result of the call (simple <code>open()</code> would likely express it better).</p>
<p>For getters use just <code>name()</code> like e.g. in Qt. For getters of boolean properties, it is usually appropriate to use <code>is</code> prefix like in <code>is_empty()</code> or <code>is_open()</code> especially when it would not be clear if it refers to an action or property, e.g. <code>empty()</code> versus <code>is_empty()</code>.</p>
<h3><a class="anchor" id="autotoc_md124"></a>
Member variables</h3>
<p>Use trailing underscore, i.e. <code>name_</code>, or nothing, i.e. <code>name</code> for member variables (attributes). No special marking is nice when used internally but not exposed to the outside world. However, if you need to distinguish a private member variable from a getter method or a function parameter name, use trailing underscore for the private variable. The underscore, as opposed to using nothing, makes it easier to distinguish member variables from other variables when reading code of a method (and <code>this-&gt;</code> is not used).</p>
<p>Do not use leading underscore, i.e. <code>_name</code>, like in Python because that might be reserved or used by standard library. Do not use leading letter <code>m</code> with or without underscore, i.e. <code>m_name</code> or <code>mname</code>, because it is harder to read. The trailing underscore is the closest thing to Python's marking of private members.</p>
<h3><a class="anchor" id="autotoc_md125"></a>
Use of auto</h3>
<p>Prefer <code>auto</code> for variables and explicit type specificiation for memeber variables.</p>
<h2><a class="anchor" id="autotoc_md126"></a>
Documentation</h2>
<p>Don't document obvious things like in "this line assigns a variable" but keep in mind that people unfamiliar with C++ will read or even use or change the code, so point out some things which might be obvious to a C++ developer, but are unexpected coming from a different programming language, for example that a function parameter which is not a pointer or reference actually copies the whole object.</p>
<p>Refer to templates as function templates and class templates, not template functions and template classes. In a strict C++ view, class template is <em>a template of a class</em> (or <em>for a class</em>), not an actual class (same for functions). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
