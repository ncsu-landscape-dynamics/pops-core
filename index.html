<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pops-core: PoPS Core - Pest or Pathogen Spread Model Core</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pops-core
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">PoPS (Pest or Pathogen Spread) Model Core C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PoPS Core - Pest or Pathogen Spread Model Core </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/ncsu-landscape-dynamics/pops-core"><object type="image/svg+xml" data="https://travis-ci.org/ncsu-landscape-dynamics/pops-core.svg?branch=master" style="pointer-events: none;">Build Status</object></a> <a href="https://zenodo.org/badge/latestdoi/142505637"><object type="image/svg+xml" data="https://zenodo.org/badge/142505637.svg" style="pointer-events: none;">DOI</object></a></p>
<p>PoPS Core is the core C++ library for the PoPS Model.</p>
<p>PoPS (Pest or Pathogen Spread) is a stochastic spread model of pests and pathogens in forest and agricultural landscapes. It is used for various pest, pathogens, and hosts. It was originally developed for <em>Phytophthora ramorum</em> and the original version of the model was written in R, later with Rcpp, and was based on Meentemeyer (2011) paper.</p>
<p>PoPS Core is a header-only C++ library. It is using templates for the main spatial data structures, i.e., rasters, to be universal and it makes use of C++11 features, so C++11 is the minimal required version.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
How to cite</h1>
<p>If you use this software or code, please cite the following papers:</p>
<ul>
<li>Jones, C., Jones, S., Petrasova, A., Petras, V., Gaydos, D., Skrip, M., Takeuchi, Y., Bigsby, K., and Meentemeyer, R., 2021. Iteratively forecasting biological invasions with PoPS and a little help from our friends. <em>Frontiers in Ecology and the Environment</em> <a href="https://doi.org/10.1002/fee.2357">DOI: 10.1002/fee.2357</a></li>
</ul>
<p>In case you are using the automatic management feature in rpops or the steering version of r.pops.spread (from the branch steering), please cite also:</p>
<ul>
<li>Petrasova, A., Gaydos, D.A., Petras, V., Jones, C.M., Mitasova, H. and Meentemeyer, R.K., 2020. Geospatial simulation steering for adaptive management. <em>Environmental Modelling &amp; Software</em> 133: 104801. <a href="https://doi.org/10.1016/j.envsoft.2020.104801">DOI: 10.1016/j.envsoft.2020.104801</a></li>
</ul>
<p>In addition to citing the above paper, we also encourage you to reference, link, and/or acknowledge specific version of the software you are using for example:</p>
<ul>
<li><em>We have used rpops R package version 1.0.0 from <a href="https://github.com/ncsu-landscape-dynamics/rpops">https://github.com/ncsu-landscape-dynamics/rpops</a></em>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Contributing</h1>
<p>This section is designed to clarify the branch structure and versioning of this repository (and interface repositories) and general naming of new features and bug fix branches, especially those that are take longer to develop.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Branch Structure</h2>
<ol type="1">
<li><b>master</b> is the stable version of the model that is used for official releases.</li>
<li><b>fix-issuenumber</b> or <b>fix-bugdescription</b> are branched off of master then merged back via a pull request once bug is fixed.</li>
<li><b>new_feature</b> is where new features are developed before they are merged into Master via a pull request. For example, infect and vector are currently being developed and will be merged together prior to being merged to master for an official major version release.</li>
</ol>
<h2><a class="anchor" id="autotoc_md4"></a>
Bug Fixes</h2>
<p>Most bugs/issues will be found in the <b>master</b> branch as it is the branch being used in the R package and Grass module. Thus bug fixes should be merged into <b>master</b> once tested on both R and Grass. Bug fixes should be released as minor versions (e.g. if major release is 1.0 then the first bug fix would be released as version 1.1 and both R and Grass would be updated to 1.1.0). If a bug is found in one of the interfaces (R package or Grass module) that doesn't require a change to PoPS Core then these repositories should be updated indepentantly and maintain a patch release 1.0.x. For example, if the current version of the R package is 1.1.0 and Grass module is 1.1.0 and a bug is found in the R package then the R package version becomes 1.1.1 while the Grass version is 1.1.0. However, the version number is still shared for all the projects, so when a new version of the GRASS module is needed, it will be 1.1.2.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
New Features</h2>
<p>When creating new features create a branch from <b>master</b> using the following syntax <b>new_feature</b>. For example, we want to add a transportation network model for human assisted dispersal, the branch created would be named transportation_network_model (or similar). New features will be merged into <b>master</b> once tested based on the priorities of our stakeholders first. Once new features are tested in R and Grass with the latest bug fixes and any other new features being included in the next major release we will merge them into <b>master</b> and create an official major release version (e.g. update from version 1.1 to version 2.0 and the R package and Grass module are updated to 2.0.0). When you are creating branches in your fork, we still recommend choosing informative names such as the one suggested above.</p>
<p>If you are interested in contributing to PoPS and are not a core developer on the model, please take a look at following documents to make the process as seamless as possible.</p>
<ol type="1">
<li><a class="el" href="md_contributing_docs_CODE_OF_CONDUCT.html">Contributor Code of Conduct</a></li>
</ol>
<ol type="1">
<li><a class="el" href="md_contributing_docs_STYLE_GUIDE.html">PoPS Core Style Guide</a></li>
</ol>
<ol type="1">
<li><a class="el" href="md_contributing_docs_CONTRIBUTING.html">Contributor Guide</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md6"></a>
C++ API</h1>
<p>The stable API to be used in other projects includes the <code><a class="el" href="classpops_1_1Model.html">pops::Model</a></code> and <code><a class="el" href="classpops_1_1Config.html">pops::Config</a></code> classes and classes used in their API (for example, <code><a class="el" href="classpops_1_1SpreadRate.html" title="Class storing and computing step spread rate for one simulation.">pops::SpreadRate</a></code>). This API is changed only beween major versions or, if really needed, to fix serious issues in the released major version.</p>
<p>Other classes and functions are part of the internal API and although you can use them in your project, you will need to follow the changes in the library more closely and update your code more often.</p>
<p>If you are using the C++ API, we invite you to open an issue in this repository to tell us about it and we can both acknowledge you in this repo or elsewhere and discuss planned changes with you.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Core Functions</h1>
<p>If you are interested in reviewing the code, you may want to focus at the following core functions rather than the API.</p>
<p>simulation.remove : removes the pest or pathogen from the infested hosts based on some environmental threshold (currently only temperature is accounted for).</p>
<p>simulation.generate : generates dispersing indivduls from all infested cells based as a function of local infected hosts and weather.</p>
<p>simulation.disperse : creates dispersal locations for the dispersing individuals from the generate function.</p>
<p>simulation.mortality : causes mortality in infested/infected hosts based on mortality rate</p>
<p>The custom date class is used to easily manage different time steps within the model and account for differences in the way frequently used weather data sets treat leap years (DAYMET drops December 31st from leap years, PRISM keeps all days even for leap years)</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Using the model</h1>
<p>The PoPS Core library can be used directly in a C++ program or through other programs. It is used in R package called rpops and a GRASS GIS module called r.pops.spread.</p>
<ul>
<li><a href="https://github.com/ncsu-landscape-dynamics/r.pops.spread">https://github.com/ncsu-landscape-dynamics/r.pops.spread</a></li>
<li><a href="https://github.com/ncsu-landscape-dynamics/rpops">https://github.com/ncsu-landscape-dynamics/rpops</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
Integrating the library into your own project</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
As a Git submodule</h2>
<p>This is a convenient way, if you are using Git and you can use the C++ header files directly.</p>
<p>Git supports inclusion of other repositories into your own code using a mechanism called submodules. In your repository, run:</p>
<div class="fragment"><div class="line">git submodule add https://github.com/ncsu-landscape-dynamics/pops-core</div>
</div><!-- fragment --><p>If you want a specific branch of PoPS Core, after adding the PoPS submodule, run the following commands (with branch-name being the branch of the PoPS library you want to use):</p>
<div class="fragment"><div class="line">cd pops-core</div>
<div class="line">git checkout origin/branch-name</div>
</div><!-- fragment --><p>The will create a directory called <code>pops-core</code> in your repository which will now contain all the files from this repository. You can use the two following commands to see the changes to your repository:</p>
<div class="fragment"><div class="line">git status</div>
<div class="line">git diff --cached</div>
</div><!-- fragment --><p>Git added a file called <code>.gitmodules</code> with the link to this repository and linked a specific commit in this repository. The commit linked is the currently latest commit to PoPS library.</p>
<p>You can now commit and push changes to your repository.</p>
<p>When someone else clones our project, they need to run the two following commands to get the content of the <code>pops-core</code> directory:</p>
<div class="fragment"><div class="line">git submodule init</div>
<div class="line">git submodule update</div>
</div><!-- fragment --><p>Alternatively, the <code>pops-core</code> directory can be populated during cloning when <code>git clone</code> is used with the <code>--recurse-submodules</code> parameter.</p>
<p>If you want to update the specific PoPS commit your repository is using to the latest one, you the following command:</p>
<div class="fragment"><div class="line">git submodule update --remote</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Compile and test</h1>
<p>Here we are assuming that you use Linux command line or equivalent and you have CMake and C++ compiler installed. We are testing with GNU GCC with (<code>g++</code>) and GNU make (<code>make</code>), but many of other tools supported by CMake should work too. See CMake documentation for different ways of compiling.</p>
<p>First download the source code (as a ZIP file and unpack it or use Git to get it from the Git repository).</p>
<p>Configure the project and use directory called <code>build</code> for configure and build outputs:</p>
<div class="fragment"><div class="line">cmake -S . -B build</div>
</div><!-- fragment --><p>Build the project:</p>
<div class="fragment"><div class="line">cmake --build build</div>
</div><!-- fragment --><p>The library itself does not need compilation since it is header only (it is compiled later with your project), but this compiled several test programs.</p>
<p>To run these tests:</p>
<div class="fragment"><div class="line">cmake --build build --target test</div>
</div><!-- fragment --><p>If something is wrong, this will generate error messages. Note that not all tests are not fully automatic, so in couple cases this only testing if the code is running and not crashing (you will need to examine the source code to see the details).</p>
<p>Additionally, create documentation using the following (<em>Doxygen</em> required):</p>
<div class="fragment"><div class="line">cmake --build build --target docs</div>
</div><!-- fragment --><p>The HTML documentation will appear in the <code>html</code> subdirectory of <code>build</code> directory. Open the file called <code>index.html</code> to access it in a web browser.</p>
<p>Optionally, to remove the build directory when you are done, use:</p>
<div class="fragment"><div class="line">rm -rf build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12"></a>
Compiling as part of another project</h1>
<p>Note that if you are not using CMake, you can just add the headers to your project since this a header-only library. However, if you are using CMake, you probably want to use the following approach.</p>
<p>Assuming you added the directory as a submodule or a plain subdirectory called <code>pops-core</code> add these two following lines to your <code>CMakeLists.txt</code> file (assuming you already have target called <code>your_target</code>):</p>
<div class="fragment"><div class="line">add_subdirectory(pops-core)</div>
<div class="line">target_link_libraries(your_target PRIVATE pops-core)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md13"></a>
Authors and contributors</h1>
<h2><a class="anchor" id="autotoc_md14"></a>
Authors</h2>
<p>_(alphabetical order)_</p>
<ul>
<li>Chris Jones</li>
<li>Margaret Lawrimore</li>
<li>Vaclav Petras</li>
<li>Anna Petrasova</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Previous contributors</h2>
<p>_(alphabetical order)_</p>
<ul>
<li>Zexi Chen</li>
<li>Devon Gaydos</li>
<li>Francesco Tonini</li>
</ul>
<p>See Git commit history, GitHub insights, or <a class="el" href="CHANGELOG_8md.html">CHANGELOG.md</a> file (if present) for details about contributions.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
License</h1>
<p>Permission to use, copy, modify, and distribute this software and its documentation under the terms of the GNU General Public License is hereby granted. No representations are made about the suitability of this software for any purpose. It is provided "as is" without express or implied warranty. See the <a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.html">GNU General Public License</a> for more details. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
